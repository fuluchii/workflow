/**
 * workflow-checklist
 * @version v0.0.1 - 2014-06-14
 * @link https://github.com/fuluchii/workflow-checklist
 * @author  <>
 * @license n License, http://www.opensource.org/licenses/n
 */
angular.module("fuluchii.workflowChecklist",[]).directive("workflow",function(){return{restrict:"EAC",template:'<div class="workflow-bar"><li ng-repeat="item in workflow_stack"><a ng-class="{green:item.state==1,red:item.state==0}" class="bar-item"  ng-click="select_tab($index)"></a>  <div ng-hide="$index == workflow_stack.length-1 " class="bar-line"></div></li>  </div>    </div><ul class="workf-list"><li ng-class="{Hide:selected_tab_index!=$index}" ng-repeat="item in workflow_stack" class="work-item"><div class="work-item-title Title">{{item.title}}</div><div class="item-con"><ul class="item-checklist"><li ng-repeat="step in item.steps" class="item-checkitem"><input  type="checkbox" class="item-check" ng-model="item.stepmap[step]" ng-checked="update()"><label  ng-class="{checkedlabel:item.stepmap[step]}">{{step}}</label></li>        </ul></div></li></ul>',scope:{_workflow:"@workflowStack"},compile:function(){return function(a){a.workflow_stack=JSON.parse(a._workflow),angular.forEach(a.workflow_stack,function(a){a.stepmap={},angular.forEach(a.steps,function(b){a.stepmap[b]=!1})}),a.select_tab=function(b){a.selected_tab_index=b,a.select_item=a.workflow_stack[b]},a.select_tab(0),a.update=function(){var b=0;angular.forEach(a.select_item.stepmap,function(a){1==a&&(b+=1)}),a.select_item.state=b==a.select_item.steps.length?1:0}}}}}).derective;